<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lucky Gacha Machine - Random Number Draw Game</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
        }

        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            color: #333;
        }

        .container {
            width: 100%;
            max-width: 1200px;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 24px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            padding: 30px;
        }

        header {
            text-align: center;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 2px solid #eaeaea;
        }

        h1 {
            color: #ff6b8b;
            font-size: 2.8rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }

        .subtitle {
            color: #6c757d;
            font-size: 1.2rem;
            font-weight: 400;
        }

        .main-content {
            display: flex;
            flex-wrap: wrap;
            gap: 40px;
            justify-content: center;
            align-items: flex-start;
        }

        .left-panel,
        .right-panel {
            flex: 1;
            min-width: 300px;
        }

        .setup-panel {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
            margin-bottom: 30px;
        }

        h2 {
            color: #495057;
            margin-bottom: 20px;
            font-size: 1.8rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        h2 i {
            color: #6a11cb;
        }

        .input-group {
            margin-bottom: 25px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #495057;
            font-size: 1.1rem;
        }

        input {
            width: 100%;
            padding: 16px 20px;
            border: 2px solid #dee2e6;
            border-radius: 12px;
            font-size: 1.2rem;
            transition: all 0.3s ease;
        }

        input:focus {
            outline: none;
            border-color: #6a11cb;
            box-shadow: 0 0 0 3px rgba(106, 17, 203, 0.1);
        }

        .button-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        button {
            padding: 16px 28px;
            border: none;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            flex: 1;
            min-width: 150px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(106, 17, 203, 0.3);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #ff9a9e 0%, #fad0c4 100%);
            color: #333;
        }

        .btn-secondary:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(255, 154, 158, 0.3);
        }

        .btn-reset {
            background: linear-gradient(135deg, #ff6b8b 0%, #ff8e53 100%);
            color: white;
        }

        .btn-reset:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(255, 107, 139, 0.3);
        }

        .gacha-machine {
            background: linear-gradient(135deg, #2c3e50 0%, #1a1a2e 100%);
            border-radius: 20px;
            padding: 40px 30px;
            text-align: center;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.2);
            position: relative;
            margin-bottom: 30px;
        }

        .gacha-machine::before {
            content: '';
            position: absolute;
            top: -10px;
            left: 10%;
            right: 10%;
            height: 20px;
            background: linear-gradient(135deg, #f1c40f 0%, #e67e22 100%);
            border-radius: 10px 10px 0 0;
        }

        .gacha-display {
            background-color: #0c2461;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            border: 8px solid #1e3799;
            position: relative;
            overflow: hidden;
        }

        .gacha-display::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 10px;
            background: linear-gradient(135deg, #f1c40f 0%, #e67e22 100%);
        }

        .number-display {
            font-size: 6rem;
            font-weight: 800;
            color: #f1c40f;
            text-shadow: 0 0 20px rgba(241, 196, 15, 0.7);
            height: 140px;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            transition: all 0.5s ease;
        }

        .number-display.rolling {
            animation: rollNumber 0.8s ease-in-out infinite;
        }

        @keyframes rollNumber {

            0%,
            100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-20px);
            }
        }

        .remaining-panel {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            padding: 25px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
            max-height: 400px;
            overflow-y: auto;
        }

        .remaining-list {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            margin-top: 15px;
        }

        .number-item {
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            color: white;
            font-size: 1.4rem;
            font-weight: 700;
            border-radius: 10px;
            transition: all 0.3s ease;
        }

        .number-item.used {
            background: linear-gradient(135deg, #ff6b8b 0%, #ff8e53 100%);
            transform: scale(0.9);
            opacity: 0.7;
        }

        .status-panel {
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            padding: 20px;
            border-radius: 15px;
            margin-top: 25px;
            text-align: center;
            font-size: 1.1rem;
            font-weight: 600;
            color: #333;
        }

        footer {
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #eaeaea;
            color: #6c757d;
            font-size: 0.9rem;
        }

        .history-panel {
            background: linear-gradient(135deg, #d4fc79 0%, #96e6a1 100%);
            padding: 20px;
            border-radius: 15px;
            margin-top: 20px;
            max-height: 200px;
            overflow-y: auto;
        }

        .history-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 10px;
            color: #333;
        }

        .history-list {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .history-item {
            background: rgba(255, 255, 255, 0.7);
            padding: 8px 15px;
            border-radius: 10px;
            font-weight: 600;
            color: #6a11cb;
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .main-content {
                flex-direction: column;
            }

            .left-panel,
            .right-panel {
                width: 100%;
            }

            h1 {
                font-size: 2.2rem;
            }

            .number-display {
                font-size: 4.5rem;
                height: 110px;
            }
        }

        @media (max-width: 480px) {
            .container {
                padding: 20px;
            }

            .button-group {
                flex-direction: column;
            }

            button {
                width: 100%;
            }

            .number-display {
                font-size: 3.5rem;
                height: 90px;
            }

            h1 {
                font-size: 1.8rem;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-egg"></i> Lucky Gacha Machine</h1>
            <p class="subtitle">Set a number range and draw non-repeating random numbers—test your luck!</p>
        </header>

        <div class="main-content">
            <div class="left-panel">
                <div class="setup-panel">
                    <h2><i class="fas fa-cog"></i> Set the Draw Range</h2>
                    <div class="input-group">
                        <label for="min-number">Minimum Number</label>
                        <input type="number" id="min-number" min="1" max="999" value="1"
                            placeholder="Enter the minimum number">
                    </div>
                    <div class="input-group">
                        <label for="max-number">Maximum Number</label>
                        <input type="number" id="max-number" min="2" max="1000" value="10"
                            placeholder="Enter the maximum number">
                    </div>
                    <div class="button-group">
                        <button id="start-btn" class="btn-primary">
                            <i class="fas fa-play-circle"></i> Start
                        </button>
                        <button id="reset-btn" class="btn-reset">
                            <i class="fas fa-redo-alt"></i> Reset Game
                        </button>
                    </div>
                </div>

                <div class="remaining-panel">
                    <h2><i class="fas fa-list-ol"></i> Remaining Numbers</h2>
                    <div id="remaining-numbers" class="remaining-list">
                        <!-- This will be generated dynamically by JavaScript -->
                        <div class="instruction">Please set the range first, then click “Start”.</div>
                    </div>
                </div>

                <div class="history-panel">
                    <div class="history-title"><i class="fas fa-history"></i> Draw History</div>
                    <div id="history-list" class="history-list">
                        <!-- This will be generated dynamically by JavaScript -->
                        <div class="instruction">No draws yet.</div>
                    </div>
                </div>
            </div>

            <div class="right-panel">
                <div class="gacha-machine">
                    <h2 style="color: white;"><i class="fas fa-dice"></i> Lucky Gacha Machine</h2>
                    <div class="gacha-display">
                        <div id="number-display" class="number-display">?</div>
                    </div>
                    <div class="button-group">
                        <button id="spin-btn" class="btn-primary" disabled>
                            <i class="fas fa-random"></i> Spin
                        </button>
                        <button id="gacha-reset-btn" class="btn-secondary" disabled>
                            <i class="fas fa-undo-alt"></i> Restart
                        </button>
                    </div>
                </div>

                <div class="status-panel">
                    <div id="status-message">Please set the draw range first, then click “Start”.</div>
                    <div id="remaining-count" style="margin-top: 10px;"></div>
                </div>
            </div>
        </div>

        <footer>
            <p>© 2023 Lucky Gacha Machine | Random Number Draw Game | Each number can only be drawn once</p>
        </footer>
    </div>

    <script>
        // Global variables
        let minNumber = 1;
        let maxNumber = 10;
        let availableNumbers = [];
        let usedNumbers = [];
        let gameActive = false;
        let isRolling = false;

        // DOM elements
        const minInput = document.getElementById('min-number');
        const maxInput = document.getElementById('max-number');
        const startBtn = document.getElementById('start-btn');
        const resetBtn = document.getElementById('reset-btn');
        const spinBtn = document.getElementById('spin-btn');
        const gachaResetBtn = document.getElementById('gacha-reset-btn');
        const numberDisplay = document.getElementById('number-display');
        const remainingNumbersDiv = document.getElementById('remaining-numbers');
        const historyListDiv = document.getElementById('history-list');
        const statusMessage = document.getElementById('status-message');
        const remainingCount = document.getElementById('remaining-count');

        // Initialize event listeners
        minInput.addEventListener('change', validateInputs);
        maxInput.addEventListener('change', validateInputs);
        startBtn.addEventListener('click', startGame);
        resetBtn.addEventListener('click', resetGame);
        spinBtn.addEventListener('click', spinGacha);
        gachaResetBtn.addEventListener('click', resetGacha);

        // Validate input range
        function validateInputs() {
            let min = parseInt(minInput.value);
            let max = parseInt(maxInput.value);

            // Ensure min does not exceed max
            if (min >= max) {
                maxInput.value = min + 1;
                max = min + 1;
            }

            // Ensure min is at least 1
            if (min < 1) {
                minInput.value = 1;
                min = 1;
            }

            // Ensure max does not exceed 1000
            if (max > 1000) {
                maxInput.value = 1000;
                max = 1000;
            }
        }

        // Start the game
        function startGame() {
            minNumber = parseInt(minInput.value);
            maxNumber = parseInt(maxInput.value);

            // Validate range
            if (minNumber >= maxNumber) {
                alert("The minimum number must be less than the maximum number!");
                return;
            }

            if (maxNumber - minNumber + 1 < 1) {
                alert("The range must contain at least 1 number!");
                return;
            }

            // Initialize available numbers
            availableNumbers = [];
            for (let i = minNumber; i <= maxNumber; i++) {
                availableNumbers.push(i);
            }

            usedNumbers = [];

            // Update UI
            updateRemainingNumbersDisplay();
            updateHistoryDisplay();
            updateStatus();

            // Enable buttons
            spinBtn.disabled = false;
            gachaResetBtn.disabled = false;

            // Set game state
            gameActive = true;

            // Clear display
            numberDisplay.textContent = "?";
            numberDisplay.classList.remove("rolling");

            // Update status message
            statusMessage.textContent = `Game started! Range: ${minNumber} - ${maxNumber}. Click “Spin” to draw a number!`;
        }

        // Spin the gacha machine
        function spinGacha() {
            if (!gameActive || availableNumbers.length === 0) {
                statusMessage.textContent = "No numbers left. Please reset the game to start again!";
                return;
            }

            if (isRolling) return;

            // Start rolling animation
            isRolling = true;
            numberDisplay.classList.add("rolling");

            // Randomly pick a number
            const randomIndex = Math.floor(Math.random() * availableNumbers.length);
            const selectedNumber = availableNumbers[randomIndex];

            // Simulate rolling time
            setTimeout(() => {
                // Remove from available list
                availableNumbers.splice(randomIndex, 1);

                // Add to used list
                usedNumbers.push(selectedNumber);

                // Update display
                numberDisplay.textContent = selectedNumber;
                numberDisplay.classList.remove("rolling");

                // Update lists
                updateRemainingNumbersDisplay();
                updateHistoryDisplay();
                updateStatus();

                // Check if game ends
                if (availableNumbers.length === 0) {
                    statusMessage.textContent = "Congratulations! All numbers have been drawn!";
                    spinBtn.disabled = true;
                } else {
                    statusMessage.textContent = `Congrats! You drew number ${selectedNumber}!`;
                }

                isRolling = false;
            }, 1500);
        }

        // Reset the gacha machine (restart with same range)
        function resetGacha() {
            if (!gameActive) return;

            // Re-initialize the game
            startGame();

            // Update status
            statusMessage.textContent = `Game reset! Range: ${minNumber} - ${maxNumber}. Click “Spin” to draw a number!`;
        }

        // Reset the entire game (back to defaults)
        function resetGame() {
            // Reset inputs
            minInput.value = 1;
            maxInput.value = 10;

            // Reset display
            numberDisplay.textContent = "?";
            numberDisplay.classList.remove("rolling");

            // Clear lists
            remainingNumbersDiv.innerHTML = '<div class="instruction">Please set the range first, then click “Start”.</div>';
            historyListDiv.innerHTML = '<div class="instruction">No draws yet.</div>';

            // Disable buttons
            spinBtn.disabled = true;
            gachaResetBtn.disabled = true;

            // Reset state
            gameActive = false;
            isRolling = false;

            // Update status
            statusMessage.textContent = 'Please set the draw range first, then click "Start".';
            remainingCount.textContent = "";
        }

        // Update remaining numbers display
        function updateRemainingNumbersDisplay() {
            if (!gameActive || availableNumbers.length === 0) {
                remainingNumbersDiv.innerHTML = '<div class="instruction">No remaining numbers.</div>';
                return;
            }

            let html = '';
            availableNumbers.forEach(number => {
                html += `<div class="number-item">${number}</div>`;
            });

            remainingNumbersDiv.innerHTML = html;
        }

        // Update draw history display
        function updateHistoryDisplay() {
            if (usedNumbers.length === 0) {
                historyListDiv.innerHTML = '<div class="instruction">No draws yet.</div>';
                return;
            }

            let html = '';
            // Show the latest 5 records, newest first
            const recentHistory = [...usedNumbers].reverse().slice(0, 5);
            recentHistory.forEach(number => {
                html += `<div class="history-item">${number}</div>`;
            });

            // If more than 5, show a hint
            if (usedNumbers.length > 5) {
                html += `<div class="history-item">+${usedNumbers.length - 5} more</div>`;
            }

            historyListDiv.innerHTML = html;
        }

        // Update status info
        function updateStatus() {
            if (!gameActive) return;

            const totalNumbers = maxNumber - minNumber + 1;
            const usedCount = usedNumbers.length;
            const remainingCountValue = totalNumbers - usedCount;

            remainingCount.textContent = `Remaining: ${remainingCountValue}/${totalNumbers}`;
        }

        // Init
        function init() {
            validateInputs();
        }

        // Initialize after DOM is ready
        window.addEventListener('DOMContentLoaded', init);
    </script>
</body>

</html>